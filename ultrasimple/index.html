<!DOCTYPE html>
<html  lang="en-US">
<head> 
    <meta charset="UTF-8" />
    <meta name="viewport" content="height=device-height,width=device-width" />
    <meta name="viewport" content="initial-scale=1.0" />
    <meta name="HandheldFriendly" content="true"/>
    <title>ultrasimple - JouSuu</title>
    <script id="shader-vs" type="vertex-shader">
    attribute vec3 v_pos;
    attribute vec3 a_normal;
    uniform mat4 u_wvp;
    varying vec3 v_normal;
    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;
    void main(void)
    {
        gl_Position = u_wvp * vec4(v_pos,1.0);
        v_normal = a_normal;
        v_texCoord = a_texCoord;
    }
    </script>
    <script id="shader-fs" type="fragment-shader">
    precision mediump float;
    //uniform vec2 resolution;
    uniform vec3 u_color;
    uniform vec3 v_dirLight;
    varying vec3 v_normal;
    //uniform float time;
    varying vec2 v_texCoord;
    uniform float u_ambientLight;
    uniform sampler2D texture;
    uniform float u_ifTexReadyThisIsOne;
    uniform float u_beat;
    void main(void)
    {
        //vec2 pos = ( gl_FragCoord.xy / resolution.xy );
        //gl_FragColor = vec4(0,0,pos.x*0.5 + abs(sin(time)),1);
        float col = clamp(-dot(v_dirLight,v_normal),0.2,0.95)*0.5 + u_beat;
        //vec3 textureCol = vec3(texture2D(texture, v_texCoord));
        //gl_FragColor = vec4(u_color*0.1 + textureCol*0.8 + vec3(col)*0.7,1)*0.8;

        if(u_ifTexReadyThisIsOne == 1.0)
            gl_FragColor = texture2D(texture, v_texCoord);
        else
            gl_FragColor = vec4(col,col,col,1);
        //gl_FragColor = vec4(gl_FragCoord.x/resolution.x,gl_FragCoord.y,0,1);
    }
    </script>


    <script id="SimpleUnlitShader-vs" type="vertex-shader">
    attribute vec3 v_pos;
    uniform mat4 u_wvp;
    void main(void)
    {
        gl_Position = u_wvp * vec4(v_pos,1.0);
    }
    </script>

    <script id="SimpleUnlitShader-fs" type="fragment-shader">
    precision mediump float;
    uniform vec3 u_color;
    void main(void)
    {
        gl_FragColor = vec4(u_color,1);
    }
    </script>







    <script id="PlaneShader-vs" type="vertex-shader">
    attribute vec3 v_pos;
    uniform mat4 u_wvp;
    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;
    void main(void)
    {
        gl_Position = u_wvp * vec4(v_pos,1.0);
        v_texCoord = a_texCoord;
    }
    </script>

    <script id="PlaneShader-fs" type="fragment-shader">
    precision mediump float;
    uniform vec3 u_color;
    varying vec2 v_texCoord;
    uniform sampler2D texture;
    void main(void)
    {
        gl_FragColor = vec4(u_color,1);
    }
    </script>




    <script src="../thirdlib/gl-matrix.js" type="text/javascript"></script>
    <script src="../thirdlib/web-audio-scheduler.js" type="text/javascript"></script>
    <script src="sketch.js" type="text/javascript"></script>
</head>
<body style="background: #000; margin:3px;">
  <canvas id="glcanvas"></canvas>
  </br><font color="red">x </font><font color="green">y </font><font color="blue">z</font>
</body>
</html>